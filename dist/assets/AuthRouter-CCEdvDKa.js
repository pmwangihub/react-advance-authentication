import{r as u,R as g,P as o,j as e,C as z,a as p,L as E,A as Z,O as ee,u as F,c as U,F as V,b as te,d as v,e as R,s as q,B as _,l as se,f as O,g as L,h as k,i as f,k as re,m as ae,n as ne,o as x,p as le,q as ie,t as oe,v as ce,w as b}from"./index-D7Ww5_xW.js";import{R as B,C as m,A as y,S as W}from"./Spinner-glRAjD6W.js";var de=["color","size","title","className"];function C(){return C=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},C.apply(this,arguments)}function ue(t,a){if(t==null)return{};var r=he(t,a),s,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)s=l[n],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function he(t,a){if(t==null)return{};var r={},s=Object.keys(t),n,l;for(l=0;l<s.length;l++)n=s[l],!(a.indexOf(n)>=0)&&(r[n]=t[n]);return r}var S=u.forwardRef(function(t,a){var r=t.color,s=t.size,n=t.title,l=t.className,i=ue(t,de);return g.createElement("svg",C({ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:r,className:["bi","bi-at",l].filter(Boolean).join(" ")},i),n?g.createElement("title",null,n):null,g.createElement("path",{d:"M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914"}))});S.propTypes={color:o.string,size:o.oneOfType([o.string,o.number]),title:o.string,className:o.string};S.defaultProps={color:"currentColor",size:"1em",title:null,className:""};var pe=["color","size","title","className"];function T(){return T=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},T.apply(this,arguments)}function me(t,a){if(t==null)return{};var r=xe(t,a),s,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)s=l[n],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function xe(t,a){if(t==null)return{};var r={},s=Object.keys(t),n,l;for(l=0;l<s.length;l++)n=s[l],!(a.indexOf(n)>=0)&&(r[n]=t[n]);return r}var D=u.forwardRef(function(t,a){var r=t.color,s=t.size,n=t.title,l=t.className,i=me(t,pe);return g.createElement("svg",T({ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:r,className:["bi","bi-lock",l].filter(Boolean).join(" ")},i),n?g.createElement("title",null,n):null,g.createElement("path",{d:"M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2m3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2M5 8h6a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1"}))});D.propTypes={color:o.string,size:o.oneOfType([o.string,o.number]),title:o.string,className:o.string};D.defaultProps={color:"currentColor",size:"1em",title:null,className:""};var ge=["color","size","title","className"];function I(){return I=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},I.apply(this,arguments)}function je(t,a){if(t==null)return{};var r=fe(t,a),s,n;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(n=0;n<l.length;n++)s=l[n],!(a.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(r[s]=t[s])}return r}function fe(t,a){if(t==null)return{};var r={},s=Object.keys(t),n,l;for(l=0;l<s.length;l++)n=s[l],!(a.indexOf(n)>=0)&&(r[n]=t[n]);return r}var G=u.forwardRef(function(t,a){var r=t.color,s=t.size,n=t.title,l=t.className,i=je(t,ge);return g.createElement("svg",I({ref:a,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:s,height:s,fill:r,className:["bi","bi-unlock-fill",l].filter(Boolean).join(" ")},i),n?g.createElement("title",null,n):null,g.createElement("path",{d:"M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2"}))});G.propTypes={color:o.string,size:o.oneOfType([o.string,o.number]),title:o.string,className:o.string};G.defaultProps={color:"currentColor",size:"1em",title:null,className:""};function be(){return e.jsx(z,{children:e.jsx("section",{className:"section register d-flex flex-column align-items-center justify-content-center py-2",children:e.jsx(z,{children:e.jsx(B,{className:"justify-content-center",children:e.jsxs(p,{lg:4,md:6,className:"d-flex flex-column align-items-center justify-content-center",children:[e.jsx("div",{className:"d-flex justify-content-center py-4",children:e.jsxs(E,{to:"/",className:"d-flex align-items-center text-decoration-none",children:[e.jsx("img",{src:"/logo.png",alt:"Logo",height:"45",className:"me-2"}),e.jsx("span",{className:"d-none d-lg-block text-secondary text-uppercase",children:Z})]})}),e.jsx(ee,{})]})})})})})}const $=u.forwardRef(({className:t,bsPrefix:a,as:r="span",...s},n)=>(a=F(a,"input-group-text"),e.jsx(r,{ref:n,className:U(t,a),...s})));$.displayName="InputGroupText";const ve=t=>e.jsx($,{children:e.jsx(V,{type:"checkbox",...t})}),ye=t=>e.jsx($,{children:e.jsx(V,{type:"radio",...t})}),M=u.forwardRef(({bsPrefix:t,size:a,hasValidation:r,className:s,as:n="div",...l},i)=>{t=F(t,"input-group");const c=u.useMemo(()=>({}),[]);return e.jsx(te.Provider,{value:c,children:e.jsx(n,{ref:i,...l,className:U(s,t,a&&`${t}-${a}`,r&&"has-validation")})})});M.displayName="InputGroup";const N=Object.assign(M,{Text:$,Radio:ye,Checkbox:ve}),H=()=>{const[t,a]=u.useState(null),{authLoader:r,authData:s}=v(i=>i.AuthLoginReducer);let n=R();const l=()=>{if(!s)return se().then(i=>{const c=i.data.google_url;c&&(window.location.href=c)}).catch(i=>{var d;let c=((d=i==null?void 0:i.response)==null?void 0:d.data)||i.message;a(c)})};return u.useEffect(()=>{t&&(n(q({authError:t})),a(null))},[t,n]),e.jsx(g.Fragment,{children:e.jsxs(_,{className:Ne,onClick:l,disabled:r,children:[e.jsx("img",{className:"rounded-circle me-1",height:"24",src:"/google.png",alt:""}),"Sign in with Google"]})})},Ne=`
    badge 
    d-flex 
    text-decoration-none 
    justify-content-center 
    align-items-center 
    p-1 
    pe-2 
    text-primary-emphasis
    bg-primary-subtle 
    border 
    border-primary-subtle 
    rounded
`,P=({name:t,label:a})=>{const[r,s]=u.useState(!1);return e.jsxs(N,{className:"mb-3",children:[e.jsx(N.Text,{id:t,onClick:()=>s(!r),children:r?e.jsx(G,{}):e.jsx(D,{})}),e.jsx(O.Control,{placeholder:a,type:r?"text":"password",name:t,required:!0})]})};P.propTypes={name:o.string.isRequired,label:o.string.isRequired};const we=()=>{const{authLoader:t,authData:a}=v(h=>h.AuthLoginReducer),{regLoader:r,regError:s,regData:n}=v(h=>h.RegisterReducer),l=R();let i=L(),c=k();u.useEffect(()=>{var w;const h=`${f.auth}${f.already}`,j=(w=c.state)==null?void 0:w.next_url;a&&!t&&i(j||h,{replace:!0})},[a,t,i,c]);const d=h=>{h.preventDefault();const j=new FormData(h.target);return h.target.reset(),l(re(j))};return e.jsx(m,{className:"border-0 shadow mb-3 w-100",children:e.jsxs(m.Body,{children:[e.jsxs("div",{className:"pt-4 pb-2",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Create account"}),e.jsx("p",{className:"text-center small",children:"Fill in your details to create account."}),s&&e.jsx(y,{info:s,variant:"danger"}),n&&e.jsx(y,{info:"",variant:"success",children:e.jsx(Y,{...n})})]}),e.jsx(O,{method:"post",onSubmit:d,children:e.jsxs(B,{children:[e.jsx(p,{lg:12,children:e.jsxs(N,{className:"mb-3",children:[e.jsx(N.Text,{id:"basic-addon1",children:e.jsx(S,{})}),e.jsx(O.Control,{placeholder:"Email",type:"email",name:"email",required:!0})]})}),e.jsx(p,{lg:12,children:e.jsx(P,{name:"password1",label:"Password"})}),e.jsx(p,{lg:12,children:e.jsx(P,{name:"password2",label:"Password again"})}),e.jsx(p,{lg:12,children:e.jsx(_,{className:"w-100",type:"submit",variant:"primary",disabled:r,children:r?"Loading...":"Create account"})}),e.jsx(p,{lg:12,children:e.jsxs("p",{className:"small mt-3 fw-bold",children:[" ",e.jsx(E,{to:`${f.auth}${f.login}`,children:"Sign in"})]})}),e.jsx(p,{lg:12,children:e.jsx("hr",{className:"mb-4"})}),e.jsx(H,{})]})})]})})},Y=({email:t})=>e.jsxs("p",{className:"mb-0 small",children:["Registration successful. Check your email - ",e.jsx("strong",{children:t})," - and verify your. Or you can resend verification email",e.jsx(E,{to:"#",children:" here"})]});Y.propTypes={email:o.string.isRequired};const J=()=>{const{authLoader:t,authData:a,authError:r}=v(d=>d.AuthLoginReducer);let s=R(),n=L(),l=k();u.useEffect(()=>{var j;const d=(j=l.state)==null?void 0:j.next_url;a&&!t&&n(d||"/",{replace:!0})},[a,t,n,l]);const i=()=>s(q(null)),c=d=>{d.preventDefault();const h=new FormData(d.target);return s(ae(h))};return e.jsx(m,{className:"border-0 shadow mb-3 w-100",children:e.jsxs(m.Body,{children:[e.jsxs("div",{className:"pt-4 pb-2",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Sing in into your account"}),e.jsx("p",{className:"text-center small",children:"Fill in your details to login."}),r&&e.jsx(y,{info:r,variant:"danger",onAlertClose:i})]}),e.jsx(O,{onSubmit:c,children:e.jsxs(B,{children:[e.jsx(p,{lg:12,children:e.jsxs(N,{className:"mb-3",children:[e.jsx(N.Text,{id:"basic-addon1",children:e.jsx(S,{})}),e.jsx(O.Control,{placeholder:"Email",type:"email",name:"email",required:!0})]})}),e.jsx(p,{lg:12,children:e.jsx(P,{name:"password",label:"Password"})}),e.jsx(p,{lg:12,children:e.jsx(_,{className:"w-100",type:"submit",variant:"primary",disabled:t,children:t?"Loading...":"Sign in"})}),e.jsx(p,{lg:12,children:e.jsx("p",{className:"small mt-3 fw-bold",children:e.jsx(E,{to:`${f.auth}${f.register}`,children:"Create an account"})})}),e.jsx(p,{lg:12,children:e.jsx("hr",{className:"mb-4"})}),e.jsx(H,{})]})})]})})};J.propTypes={};const X=()=>{const{authData:t}=v(r=>r.AuthLoginReducer),a=L();return u.useEffect(()=>{let r=`${f.auth}${f.login}`;t||a(r,{replace:!0})},[t,a]),e.jsx(m,{className:"border-0 shadow mb-3 w-100",children:e.jsx(m.Body,{children:e.jsxs("div",{className:"pt-4 pb-2",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Your are already authenticated"}),e.jsx("p",{className:"text-center small",children:"Choose one of the actions below."})]})})})};X.propTypes={};const K=()=>e.jsx(m,{className:"border-0 shadow mb-3 w-100",children:e.jsx(m.Body,{children:e.jsxs("div",{className:"pt-4 pb-2",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Your are already authenticated"}),e.jsx("p",{className:"text-center small",children:"Choose one of the actions below."})]})})});K.propTypes={};const Oe=()=>{const{regLoader:t,regError:a,regData:r}=v(i=>i.RegisterReducer),s=k(),n=L(),l=R();return u.useEffect(()=>{const c=new URLSearchParams(s.search).get("key");c&&l(ne(c))},[s,n,l]),e.jsx(m,{className:"border-0 bg-transparent mb-3 w-100",children:e.jsx(m.Body,{children:e.jsxs("div",{className:"pt-4 pb-2",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Activate Account"}),t&&e.jsx("div",{className:"text-center",children:e.jsx(W,{animation:"border",variant:"primary"})}),a&&e.jsx(y,{info:a,variant:"danger"}),!r&&e.jsx(y,{info:"",variant:"success",children:e.jsx(Ee,{...r})})]})})})},Ee=()=>e.jsxs("p",{className:"mb-0 small",children:["Your account has been activated. Please ",e.jsx(E,{to:`${x.AUTH}${x.LOGIN}`,children:" Sign in here"})]}),Q=()=>{const[t,a]=u.useState(!0),[r,s]=u.useState(null),{authData:n}=v(d=>d.AuthLoginReducer),l=L(),i=R();let c=`${x.PROFILE}${x.PROFILE_SECURED_INFO}/`;return u.useEffect(()=>{n&&l(c,{replace:!0})},[n]),u.useEffect(()=>{const d=new URLSearchParams(window.location.search),h=d.get("access"),j=d.get("refresh");return le.post(`${ie}accounts/google-complete/`,{access:h,refresh:j},{withCredentials:!0,headers:{Authorization:`Bearer ${h}`,"Content-Type":"application/json","X-Origin":"react"}}).then(A=>{let w=A.data;localStorage.setItem("authData",JSON.stringify(w)),i(oe(w)),a(!1)}).catch(A=>{s(A.response.data),a(!1)}),()=>{}},[l,i,c]),e.jsx(m,{className:"border-0 bg-transparent mb-3 w-100",children:e.jsx(m.Body,{children:e.jsxs("div",{className:"pt-4 pb-2",children:[e.jsx("h5",{className:"card-title text-center pb-0 fs-4",children:"Google Sign in complete"}),t&&e.jsx("div",{className:"text-center",children:e.jsx(W,{animation:"border",variant:"primary"})}),!t&&r&&e.jsx(y,{info:r,variant:"danger"})]})})})};Q.propTypes={};const Re=()=>e.jsx(ce,{children:e.jsxs(b,{element:e.jsx(be,{}),children:[e.jsx(b,{path:`${x.ALREADY}`,element:e.jsx(X,{})}),e.jsx(b,{path:`${x.REGISTER}`,element:e.jsx(we,{})}),e.jsx(b,{path:`${x.LOGIN}`,element:e.jsx(J,{})}),e.jsx(b,{path:`${x.RESEND}`,element:e.jsx(K,{})}),e.jsx(b,{path:`${x.ACTIVATE}`,element:e.jsx(Oe,{})}),e.jsx(b,{path:`${x.GOOGLE_COMPLETE}`,element:e.jsx(Q,{})})]})});Re.propTypes={};export{Re as default};
